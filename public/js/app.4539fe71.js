(function(t){function e(e){for(var o,a,r=e[0],c=e[1],l=e[2],h=0,d=[];h<r.length;h++)a=r[h],i[a]&&d.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],o=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(o=!1)}o&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var o={},i={app:0},n=[];function a(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=o,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(s,o,function(e){return t[e]}.bind(null,o));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0085":function(t,e,s){},"034f":function(t,e,s){"use strict";var o=s("64a9"),i=s.n(o);i.a},"04f4":function(t,e,s){},"053d":function(t,e,s){"use strict";var o=s("4bd6"),i=s.n(o);i.a},1:function(t,e){},"14d2":function(t,e,s){"use strict";var o=s("c232"),i=s.n(o);i.a},"162c":function(t,e,s){"use strict";var o=s("c794"),i=s.n(o);i.a},"211d":function(t,e,s){"use strict";var o=s("4539"),i=s.n(o);i.a},"21f0":function(t,e,s){"use strict";var o=s("4cfe"),i=s.n(o);i.a},2641:function(t,e,s){"use strict";var o=s("870f"),i=s.n(o);i.a},"289d":function(t,e,s){},"2de3":function(t,e,s){"use strict";var o=s("289d"),i=s.n(o);i.a},"369a":function(t,e,s){},"3f6a":function(t,e,s){"use strict";var o=s("63f9"),i=s.n(o);i.a},4539:function(t,e,s){},"4bd6":function(t,e,s){},"4cfe":function(t,e,s){},"521b":function(t,e,s){},"523c":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var o=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("nav-header"),s("tsne-map")],1)},n=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"left-header"},[s("router-link",{attrs:{to:"/tsne"}},[t._v("t-SNE")]),s("router-link",{attrs:{to:"/svm"}},[t._v("SVM")]),s("router-link",{attrs:{to:"/classifier"}},[t._v("Classifier")])],1),s("div",{staticClass:"right-header"},[s("router-link",{attrs:{to:"/Dataset"}},[t._v("Dataset")]),s("router-link",{attrs:{to:"/modes"}},[t._v("modes")])],1)])},r=[],c={name:"NavHeader"},l=c,u=(s("cd73"),s("2877")),h=Object(u["a"])(l,a,r,!1,null,"55c8e49a",null);h.options.__file="NavHeader.vue";var d=h.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[s("div",{staticClass:"mode-header"},[s("div",{staticClass:"row"},[s("div",{staticClass:"btn",class:{active:t.clusterMode},on:{click:t.toggleClusterMode}},[t._v("\n                cluster\n            ")]),s("div",{staticClass:"btn",class:{active:t.oldClusterMode},on:{click:t.toggleOldClusterMode}},[t._v("\n                old cluster\n            ")]),s("div",{staticClass:"btn",class:{active:t.sizeRankedMode},on:{click:t.toggleSizeRankedMode}},[t._v("\n                size Ranked\n            ")]),s("div",{staticClass:"btn",class:{active:t.boarderRankedMode},on:{click:t.toggleBoarderRankedMode}},[t._v("\n                boarder Ranked\n            ")]),s("div",{staticClass:"btn",class:{active:t.neighbourMode},on:{click:t.toggleNeighbourMode}},[t._v("\n                neighbour\n            ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",attrs:{if:t.nodesTotal}},[t._v(t._s(t.nodesRecived+"/"+t.nodesTotal))]),s("div",{staticClass:"btn",class:{active:t.showHeatmap},on:{click:t.toggleShowHeatmap}},[s("navmap")],1),s("div",{staticClass:"btn",class:{active:t.showNavHeatmap},on:{click:t.toggleShowNavHeatmap}},[s("navmap")],1),s("div",{staticClass:"btn",class:{active:t.showOptions},on:{click:t.toggleShowOptions}},[t._v("\n                Options\n            ")]),s("div",{staticClass:"btn",class:{active:t.loadingNodes},on:{click:t.sendData}},[t._v("\n                Update\n                "),t.loadingNodes?t._e():s("send"),t.loadingNodes?s("div",{staticClass:"loader"}):t._e()],1),s("div",{staticClass:"btn",class:{active:t.autoUpdateEmbedding},on:{click:t.toggleUpdateEmbedding}},[t._v("\n                "+t._s(t.autoUpdateEmbedding?"stop":"start")+"\n                "),t.autoUpdateEmbedding?t._e():s("play"),t.autoUpdateEmbedding?s("stop"):t._e()],1)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"stack"},[s("canvas",{ref:"canvas",staticClass:"canvas",attrs:{id:"canvas",tabindex:"0"}}),s("div",{staticClass:"maps"},[s("div",{staticClass:"row"},[s("div",{staticClass:"btn",class:{active:t.target},on:{click:t.selectTarget}},[s("target")],1),s("div",{staticClass:"btn",class:{active:t.scissors},on:{click:t.selectScissors}},[s("scissors")],1),s("div",{staticClass:"btn",on:{click:t.clearGroup}},[s("x")],1)]),s("div",{class:{hide:!t.showHeatmap}},[s("canvas",{staticClass:"canvas",attrs:{id:"heatmap",tabindex:"0"}})]),s("div",{staticClass:"navMap",class:{hide:!t.showNavHeatmap}},[s("canvas",{staticClass:"canvas",attrs:{id:"navHeatmap",tabindex:"0"}}),s("canvas",{attrs:{id:"navHeatmapRect",tabindex:"0"}})])])]),s("div",{staticClass:"details"},[t.showOptions?s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("Options")]),s("div",{staticClass:"option-title"},[t._v("Cluster")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: radius: "+t._s(t.clusterRadius))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterRadius(-1)}}},[t._v("-1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterRadius(1)}}},[t._v("+1")]),s("div",{staticClass:"btn",on:{click:function(e){t.superCluster()}}},[t._v("update")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: tile: "+t._s(t.clusterTile))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterTile(-1)}}},[t._v("-1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterTile(1)}}},[t._v("+1")])])]),s("div",{staticClass:"option-title"},[t._v("Old cluster")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: "+t._s(Math.round(t.cluster)))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(-10)}}},[t._v("-10")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(-100)}}},[t._v("-100")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(100)}}},[t._v("+100")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(10)}}},[t._v("+10")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: growth: "+t._s(t.clusterGrowth))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterGrowth(-.01)}}},[t._v("-0.1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterGrowth(.01)}}},[t._v("+0.1")])])]),s("div",{staticClass:"option-title"},[t._v("Image")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Image: size: "+t._s(t.imgSize))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeImgSize(-1)}}},[t._v("-1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeImgSize(1)}}},[t._v("+1")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Represent: alpha")]),s("div",{staticClass:"btn",class:{active:t.representWithAlpha},on:{click:t.toggleRepresentWithAlpha}},[t._v("\n                            "+t._s(t.representWithAlpha?"On":"Off")+"\n                        ")])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Represent: size: "+t._s(t.representImgSize))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeRepresentImgSize(-1)}}},[t._v("-1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeRepresentImgSize(1)}}},[t._v("+1")])])]),s("div",{staticClass:"option-title"},[t._v("Other")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("zoomStage: "+t._s(t.zoomStage))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeZoomStage(-1)}}},[t._v("-1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeZoomStage(1)}}},[t._v("+1")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("zoomStage: "+t._s(t.scale))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeScaleDown()}}},[t._v("-")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeScaleUp()}}},[t._v("+")])])]),s("div",{staticClass:"option-title"},[t._v("Ranked")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("sizeRange: "+t._s(t.sizeRange))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeSizeRange(-1)}}},[t._v("-1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeSizeRange(1)}}},[t._v("+1")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Sort")]),s("div",{staticClass:"btn",class:{active:t.sorted},on:{click:t.sortNodes}},[t._v("\n                        "+t._s(t.sorted?"On":"Off")+"\n                    ")])]),s("div",{staticClass:"row-btn"},t._l(t.gradient,function(e,o){return s("div",{key:o,staticClass:"color",class:{activeColor:t.selectedGradient===o},style:{backgroundColor:"rgb("+e[0]+","+e[1]+","+e[2]+")"},on:{click:function(e){t.changeGradientColor(o)}}},[t._v("\n                        "+t._s(o)+"\n                    ")])})),s("slider-picker",{on:{input:t.changeColor},model:{value:t.colors,callback:function(e){t.colors=e},expression:"colors"}}),s("div",{staticClass:"option-title"},[t._v("Heatmap")]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Radius: "+t._s(t.heatmapRadius))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapRadius(-1)}}},[t._v("+1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapRadius(1)}}},[t._v("+1")])])]),s("div",{staticClass:"row-btn"},[s("div",[t._v("Blur: "+t._s(t.heatmapBlur))]),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapBlur(-1)}}},[t._v("-1")]),s("div",{staticClass:"btn",on:{click:function(e){t.changeHeatmapBlur(1)}}},[t._v("+1")])])])],1):t._e(),t.showGroups?s("groups",{attrs:{setActiveGroup:t.setActiveGroup,activeGroup:t.activeGroup,getStore:t.getStore,toggleNeighbourMode:t.toggleNeighbourMode,neighbourMode:t.neighbourMode}}):t._e(),t.neighbourMode?s("neighbours",{attrs:{getStore:t.getStore,changeNeighboursThreshold:t.changeNeighboursThreshold,neighboursThreshold:t.neighboursThreshold}}):t._e(),s("router-view",{attrs:{nodes:t.cuttedNodes,labels:t.labels,node:t.clickedNode,getNode:t.getNode,changeActiveNode:t.changeActiveNode,getStore:t.getStore,dataset:t.dataset,handleChangeDataset:t.handleChangeDataset}}),t.activeNode?s("div",{staticClass:"info-box"},[t.activeNode.hasImage?s("img",{staticClass:"active-img",attrs:{src:t.activeNode.image.src}}):t._e(),s("div",[t._v("Name: "+t._s(t.activeNode.name))]),s("div",[t._v("Label: "+t._s(t.activeNode.label))]),s("div",[t._v("Labels: "+t._s(t.activeNode.labels))]),s("div",[t._v("Links #: "+t._s(Object.keys(t.activeNode.links).length))])]):t._e(),s("logs",{attrs:{getStore:t.getStore}})],1)])])},v=[],p=(s("456d"),s("96cf"),s("1da1")),f=(s("ac6a"),s("8615"),s("8055")),m=s.n(f),b=s("6ebf"),w=s.n(b),C=s("c345"),_=(s("6aa2"),s("7f7f"),s("d4ec")),k=function t(e){var s=this;Object(_["a"])(this,t),this.name=e.name,this.links=e.links,this.index=e.index,this.x=e.x,this.y=e.y,this.colorKey=e.colorKey,this.group=!1,this.groupId=null,this.clique=e.clique,this.cliqueLen=e.clique.length,this.cluster=e.cluster,this.isClusterd=!0,this.isNearly=!1,this.labels=e.labels,this.rank=e.rank,this.hasImage=!1,this.image=new Image,this.imageData={};try{Object.values(e.pics).forEach(function(t,e){s.imageData[e]=new ImageData(new Uint8ClampedArray(t.data),t.info.width,t.info.height)})}catch(o){console.error(o),console.log(this),console.log(e)}},y=(s("7514"),s("55dd"),s("6762"),s("2fdb"),s("c7c6"),s("be94")),x=s("bee2"),N=s("ade3"),S=s("6ff6"),M=function(){function t(e,s,o,i){var n=this;Object(_["a"])(this,t),Object(N["a"])(this,"scaleTestDraw",function(){n.scaleTest&&(console.log("scaleTestDraw"),requestAnimationFrame(n.scaleTestDraw))}),this.socket=o,this.ui=i,this.canvas=e,this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height,this.hitCtx=s.getContext("2d"),this._valid=!0,this.nodes={},this.colorHash={},this.panning=!1,this._draggNode=null,this.nodeOnMouseDown=!1,this.selectedLabel=null,this.selectedCategory=null,this._nodeUnderMouse=!1,this._scissors=!1,this.drawScissors=!1,this.scissorsStartX=0,this.scissorsStartY=0,this.scissorsEndX=0,this.scissorsEndY=0,this._cluster=100,this._clusterRadius=5,this._clusterTile=10,this.supercluster=Object(S["a"])(),this._scale=20,this._scaleFaktor=0,this._zoomStage=0,this.imgSize=0,this.representImgSize=5,this._clusterGrowth=1.2,this.translateX=this.width/2,this.translateY=this.height/2,this.startX=null,this.startY=null,this.canvas.onmousedown=function(t){return n.handleMouseDown(t)},this.canvas.onmousemove=function(t){return n.handleMouseMove(t)},this.canvas.onmouseup=function(t){return n.handleMouseUp(t)},this.canvas.ondblclick=function(t){return n.handleDoubleClick(t)},this.canvas.onwheel=function(t){return n.zoom(t)},this.sortedNodes=[],this.sorted=!1,this.sizeRange=3,this.maxZoomLvl=20,this._moveGroupToMouse=!1,this.groupNeighbours={},this.removedGroupNeighbours={},this.maxDrawTime=0,this.maxHitMapTime=0,this.perfLogs={draw:[],hitmap:[]},this.scaleTest=!1}return Object(x["a"])(t,[{key:"triggerDraw",value:function(){this.valid=!1}},{key:"doubleNodes",value:function(){var t=this,e=Object.keys(this.nodes).length,s=2*Math.random()-1;console.log(e),Object.values(this.nodes).map(function(o,i){var n=e+i,a=Object(y["a"])({x:i%2?o.x-s:o.x+s,y:i%2?o.y-s:o.y+s},o);a.index=n,console.log({newNode:a,node:o,index:n}),t.addNode(a)}),console.log(this.nodes)}},{key:"createSuperCluster",value:function(){console.time("create geoPoints");var t=Object.values(this.nodes).map(function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},properties:{index:t.index}}});console.timeEnd("create geoPoints"),console.log(t),console.time("build superClusterIndex"),this.supercluster=Object(S["a"])({radius:this.clusterRadius,maxZoom:this.maxZoomLvl,extend:this.clusterTile,log:!0}),this.supercluster.load(t),console.timeEnd("build superClusterIndex"),console.log(this.supercluster),this.updateClustering(!0),this.triggerDraw()}},{key:"updateClustering",value:function(t){var e=this;function s(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}if(this.supercluster){console.time("get cluster");var o=this.zoomStage,i=this.scale,n=this.width,a=this.height,r=this.translateX,c=this.translateY,l=[-r/i,-c/i,(n-c)/i,(a-c)/i],u=this.supercluster.getClusters(l,o);console.timeEnd("get cluster"),console.time("update cluster on nodes"),console.log(u),u.forEach(function(o){var i=o.properties,n=i.index,a=i.cluster_id;if(n)e.nodes[n].isClusterd=!1;else if(a){var r=e.supercluster.getLeaves(o.id,1/0);t&&console.log(o),t&&console.log(o.geometry.coordinates);var c=null,l=1/0;r.forEach(function(i){var n=e.nodes[i.properties.index];n.isClusterd=!0,t&&console.log([n.x,n.y]),t&&console.log(i.geometry.coordinates);var a=s(i.geometry.coordinates,o.geometry.coordinates);t&&console.log(a),a<l&&(l=a,c=i.properties.index)}),t&&console.log({centroidId:c,min:l}),e.nodes[c].isClusterd=!1}}),console.timeEnd("update cluster on nodes")}}},{key:"clearGroup",value:function(){Object.values(this.nodes).forEach(function(t){t.group&&(t.group=!1)}),this.triggerDraw()}},{key:"deleteGroup",value:function(t){Object.values(this.nodes).forEach(function(e){e.groupId===t&&(e.group=!1,e.groupId=null)}),this.triggerDraw()}},{key:"loadGroupByGroupId",value:function(t){Object.values(this.nodes).forEach(function(e){e.group=e.groupId===t?t:null}),this.triggerDraw()}},{key:"addLabeledToGroup",value:function(t){Object.values(this.nodes).forEach(function(e){return e.labels.includes(t)&&(e.group=!0)}),this.triggerDraw()}},{key:"getGroupedNodeIds",value:function(){var t=[];return Object.values(this.nodes).forEach(function(e){return e.group?t.push(e.index):null}),t}},{key:"saveGroup",value:function(t){var e=this;Object.keys(this.nodes).forEach(function(s){return e.nodes[s].group?e.nodes[s].groupId=t:null})}},{key:"addNodesToActiveGroup",value:function(t){var e=this;t.forEach(function(t){e.nodes[t].group=!0,e.nodes[t].groupId=e.ui.activeGroup})}},{key:"moveGroupToPosition",value:function(t,e){Object.values(this.nodes).forEach(function(s){s.group&&(s.x+=(t-s.x)/2,s.y+=(e-s.y)/2)}),this.triggerDraw()}},{key:"updateGroupNeighbours",value:function(t){this.groupNeighbours=t,this.removedGroupNeighbours={},this.triggerDraw()}},{key:"resetGroupNeighbours",value:function(){this.groupNeighbours={},this.removedGroupNeighbours={},this.triggerDraw()}},{key:"addNode",value:function(t){this.nodes[t.index]=t,this.colorHash["rgb(".concat(t.colorKey[0],",").concat(t.colorKey[1],",").concat(t.colorKey[2],")")]=t.index,this.triggerDraw()}},{key:"updateNodes",value:function(t){var e=this;Object.values(t).forEach(function(t){e.nodes[t.index].x=t.x,e.nodes[t.index].y=t.y,t.labels&&(e.nodes[t.index].labels=t.labels)}),this.triggerDraw()}},{key:"getNodes",value:function(){var t={};return Object.values(this.nodes).forEach(function(e){var s=e.index,o=e.x,i=e.y,n=e.name,a=e.negatives,r=e.positives,c=e.links,l=e.labels;t[s]={index:s,x:o,y:i,name:n,negatives:a,positives:r,links:c,labels:l}}),t}},{key:"getNodesSimple",value:function(){var t={};return Object.values(this.nodes).forEach(function(e){var s=e.index,o=e.x,i=e.y;return t[s]={index:s,x:o,y:i}}),t}},{key:"getNode",value:function(t){return this.nodes[t]}},{key:"sortNodes",value:function(){this.sorted=!this.sorted,this.sortedNodes.length||(console.time("sortNodes"),this.sortedNodes=Object.values(this.nodes).sort(function(t,e){return console.log(t.cliqueLen-e.cliqueLen),t.cliqueLen-e.cliqueLen}),console.timeEnd("sortNodes")),this.triggerDraw()}},{key:"changeScaleUp",value:function(){this.scaleFaktor+=1,this.scale+=20*this.scaleFaktor}},{key:"changeScaleDown",value:function(){this.zoomStage-=1,this.scaleFaktor-=1}},{key:"toggleScaleTest",value:function(){return this.scaleTest=!this.scaleTest,requestAnimationFrame(this.scaleTestDraw),this.scaleTest}},{key:"draw2",value:function(){var t=this,e=window.performance.now(),s=this.zoomStage,o=this.scale,i=this.width,n=this.height,a=this.translateX,r=this.translateY,c=this.representImgSize,l=new Uint8ClampedArray(i*n*4),u=new Uint8ClampedArray(i*n*4),h=this.ui,d=h.boarderRankedMode,g=h.sizeRankedMode,v=h.gradient,p=h.clusterMode,f=h.oldClusterMode,m=h.neighbourMode,b=h.representWithAlpha,w=1,C=this.sorted?this.sortedNodes:Object.values(this.nodes);p&&this.updateClustering(),C.forEach(function(e){var h=g?s+Math.floor(e.rank*t.sizeRange):s;h+=t.imgSize;var C=p&&!e.isClusterd||f&&e.cluster<t.cluster;C&&(h+=c),h<0&&(h=0),h>14&&(h=14);var _=e.imageData[h];if(!_)return console.error("no image for node: ".concat(e.id,"exists"));var k=_.width,y=_.height,x=Math.floor(e.x*o+a-k/2),N=Math.floor(e.y*o+r-y/2),S=x>w&&N>w&&x<i-k-w&&N<n-y-w;if(S){var M=!0;if(e.labels.forEach(function(e,s){e&&t.ui.labels[s]&&t.ui.labels[s].labels.forEach(function(t){t&&!t.show&&t.name===e&&(M=!1)})}),m&&!e.group){var O=t.groupNeighbours[e.index];(!O||O>t.ui.neighboursThreshold)&&(M=!1)}var G=_.data;if(M)for(var R=0;R<y;R+=1)for(var D=4*((N+R)*i+x),T=0;T<k;T+=1){var E=D+4*T,j=4*(R*k+T);l[E]=G[j],l[E+1]=G[j+1],l[E+2]=G[j+2],l[E+3]=b&&C?200:l[E+3]?l[E+3]+10*e.cliqueLen:50+50*s,u[E]=e.colorKey[0],u[E+1]=e.colorKey[1],u[E+2]=e.colorKey[2],u[E+3]=255}if(d)for(var z=v[e.cliqueLen],H=-2;H<=y+1;H+=1){var I=4*((N+H)*i+x);if(-2===H||H===y+1)for(var A=0;A<k;A+=1){var L=I+4*A;l[L]=z[0],l[L+1]=z[1],l[L+2]=z[2],l[L+3]=200}else{var P=I-8;l[P]=z[0],l[P+1]=z[1],l[P+2]=z[2],l[P+3]=200;var X=I+4*(k+1);l[X]=z[0],l[X+1]=z[1],l[X+2]=z[2],l[X+3]=200}}var Y=t.selectedCategory&&t.selectedLabel&&t.selectedLabel===e.labels[t.selectedCategory];if(Y)for(var B=t.ui.labels[t.selectedCategory].labels.find(function(e){return e.name===t.selectedLabel}),U=B.color,F=-2;F<=y+1;F+=1){var $=4*((N+F)*i+x);if(-2===F||F===y+1)for(var q=0;q<k;q+=1){var K=$+4*q;l[K]=U[0],l[K+1]=U[1],l[K+2]=U[2],l[K+3]=200}else{var W=$-8;l[W]=U[0],l[W+1]=U[1],l[W+2]=U[2],l[W+3]=200;var Z=$+4*(k+1);l[Z]=U[0],l[Z+1]=U[1],l[Z+2]=U[2],l[Z+3]=200}}}});var _=[250,208,44],k=[40,33,32],y=[0,127,0];if(C.forEach(function(e){var u=t.groupNeighbours[e.index];if(e.group||e.isNearly||u&&!(u>t.ui.neighboursThreshold)){var h=u?_:e.isNearly?y:k,d=g?s+Math.floor(e.rank*t.sizeRange):s;d+=t.imgSize,d<0&&(d=0),d>14&&(d=14),(p&&!e.isClusterd||f&&e.cluster<t.cluster)&&(d+=c);var v=e.imageData[d];if(!v)return console.error("no image for node: ".concat(e.id,"exists"));var m=v.width,b=v.height,C=Math.floor(e.x*o+a-m/2),x=Math.floor(e.y*o+r-b/2),N=C>w&&x>w&&C<i-m-w&&x<n-b-w;if(N)for(var S=Math.ceil(b/10),M=Math.ceil(m/10),O=0;O<S;O+=1)for(var G=4*((x+b+S+O)*i+C-M),R=0;R<m+2*M;R+=1){var D=G+4*R;l[D]=h[0],l[D+1]=h[1],l[D+2]=h[2],l[D+3]=u?200:255}}}),this.drawScissors)for(var x=this.scissorsStartX<this.scissorsEndX?this.scissorsStartX:this.scissorsEndX,N=this.scissorsStartY<this.scissorsEndY?this.scissorsStartY:this.scissorsEndY,S=Math.abs(this.scissorsEndX-this.scissorsStartX),M=Math.abs(this.scissorsEndY-this.scissorsStartY),O=[56,130,255],G=0;G<M;G+=1)for(var R=4*((N+G)*i+x),D=0;D<S;D+=1){var T=R+4*D;if(0===G||G===M-1)l[T]=O[0],l[T+1]=O[1],l[T+2]=O[2],l[T+3]=255;else if(0===D||D===S-1){var E=R;l[E]=O[0],l[E+1]=O[1],l[E+2]=O[2],l[E+3]=255;var j=R+4*(S-1);l[j]=O[0],l[j+1]=O[1],l[j+2]=O[2],l[j+3]=255}}var z=new ImageData(l,i,n),H=new ImageData(u,i,n),I=this.ui.toggle?this.ctx:this.hitCtx;this.ctx.resetTransform(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.putImageData(z,0,0),I.resetTransform(),I.clearRect(0,0,this.width,this.height),I.putImageData(H,0,0);var A=window.performance.now(),L=A-e;this.perfLogs.draw.push(L),L>this.maxDrawTime&&(this.maxDrawTime=L,console.warn("new max draw time"),console.warn(this.maxDrawTime)),this.valid=!0,this.ui.showHeatmap&&requestAnimationFrame(this.ui.drawHeatmap),this.ui.showNavHeatmap&&requestAnimationFrame(this.ui.drawNavHeatmapRect)}},{key:"zoom",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.scale,s=t.offsetX,o=t.offsetY,i=(s-this.translateX)/e,n=(o-this.translateY)/e;t.deltaY<0&&(console.log("zoom in"),this.zoomStage+=1,this.changeScaleUp(),this.cluster*=this.clusterGrowth),t.deltaY>0&&(console.log("zoom out"),this.scale-=20*this.scaleFaktor,this.changeScaleDown(),this.cluster/=this.clusterGrowth);var a=this.scale-e;return this.translateX-=i*a,this.translateY-=n*a,this.triggerDraw(),!1}},{key:"findNodeByMousePosition",value:function(t,e){var s=this.hitCtx.getImageData(t,e,1,1).data,o="rgb(".concat(s[0],",").concat(s[1],",").concat(s[2],")"),i=this.colorHash[o];return i>=0?this.nodes[i]:null}},{key:"handleMouseDown",value:function(t){t.preventDefault(),t.stopPropagation(),console.log("mousedown");var e=this.nodeUnderMouse;this.nodeOnMouseDown=e,this.startX=t.offsetX,this.startY=t.offsetY,e?this.draggNode=e:this.scissors?(console.log("Scissors"),this.drawScissors=!0,this.scissorsStartX=this.startX,this.scissorsStartY=this.startY,this.triggerDraw()):this.panning=!0}},{key:"handleMouseMove",value:function(t){var e=t.offsetX,s=t.offsetY;if(this.scissors)return this.scissorsEndX=e,this.scissorsEndY=s,this.triggerDraw();if(this.draggNode||this.panning){var o=e-this.startX,i=s-this.startY;if(this.startX=e,this.startY=s,this.panning)this.translateX+=o,this.translateY+=i;else if(this.draggNode){var n=o/this.scale,a=i/this.scale;if(this.draggNode.group)Object.values(this.nodes).forEach(function(t){t.group&&(t.x+=n,t.y+=a)});else if(this.draggNode.x+=n,this.draggNode.y+=a,this.ui.clusterMode){console.time("nodesInRange");var r=this.supercluster.trees[this.supercluster.trees.length-1],c=r.within(O(this.draggNode.x),G(this.draggNode.y),.01);console.warn(c),Object.values(this.nodes).forEach(function(t){t.isNearly=c.includes(t.index)}),console.timeEnd("nodesInRange")}}return this.triggerDraw()}var l=this.findNodeByMousePosition(e,s);this.nodeUnderMouse=l,this.ui.activeNode=l,l&&!l.hasImage&&this.socket.emit("requestImage",{name:l.name,index:l.index})}},{key:"handleMouseUp",value:function(t){var e=this;console.log("mouseup");var s=this.nodeUnderMouse,o=t.ctrlKey;if(s&&s===this.nodeOnMouseDown&&(console.log("click on node:"),console.log(s),o&&(s.group?(s.group=!1,s.groupId=0):(s.group=!0,s.groupId=this.ui.activeGroup)),this.ui.clickedNode=s,this.ui.neighbourMode&&this.groupNeighbours[s.index]&&(this.removedGroupNeighbours[s.index]=this.groupNeighbours[s.index],this.groupNeighbours[s.index]=void 0)),this.panning=!1,this.draggNode=!1,this.scissors){this.ui.cuttedNodes=[];var i=(this.scissorsStartX-this.translateX)/this.scale,n=(this.scissorsStartY-this.translateY)/this.scale,a=(this.scissorsEndX-this.translateX)/this.scale,r=(this.scissorsEndY-this.translateY)/this.scale;Object.values(this.nodes).forEach(function(t){(t.x>i&&t.x<a||t.x<i&&t.x>a)&&(t.y<n&&t.y>r||t.y>n&&t.y<r)&&(e.ui.cuttedNodes.push(t),t.group=!0,t.groupId=e.ui.activeGroup)}),this.scissors=!1,this.ui.scissors=!1,this.drawScissors=!1}this.triggerDraw()}},{key:"handleDoubleClick",value:function(t){if(console.log("Double click"),this.moveGroupToMouse){var e=(t.offsetX-this.translateX)/this.scale,s=(t.offsetY-this.translateY)/this.scale;this.moveGroupToPosition(e,s)}}},{key:"sizeRange",set:function(t){this._sizeRange=t<0?0:t,this.triggerDraw()},get:function(){return this._sizeRange}},{key:"scale",set:function(t){this._scale=t<20?20:Math.round(t),this.triggerDraw(),this.ui.scale=this.scale},get:function(){return this._scale}},{key:"zoomStage",set:function(t){t<0?this._zoomStage=0:t>this.maxZoomLvl?this._zoomStage=this.maxZoomLvl:this._zoomStage=t,this.ui.zoomStage=this._zoomStage},get:function(){return this._zoomStage}},{key:"scaleFaktor",set:function(t){this._scaleFaktor=t<0?0:t},get:function(){return this._scaleFaktor}},{key:"translateX",set:function(t){this._translateX=Math.round(t),this.ui.translateX=t},get:function(){return this._translateX}},{key:"translateY",set:function(t){this._translateY=Math.round(t),this.ui.translateY=t},get:function(){return this._translateY}},{key:"cluster",set:function(t){this._cluster=t<1?1:t,this.triggerDraw(),this.ui.cluster=this.cluster},get:function(){return this._cluster}},{key:"clusterRadius",set:function(t){this._clusterRadius=t<1?1:t},get:function(){return this._clusterRadius}},{key:"clusterTile",set:function(t){this._clusterTile=t<1?1:t},get:function(){return this._clusterTile}},{key:"scissors",set:function(t){this._scissors=t,this.canvas.style.cursor=t?"crosshair":"default"},get:function(){return this._scissors}},{key:"nodeUnderMouse",set:function(t){this._nodeUnderMouse=t,this.canvas.style.cursor=t?"grab":"default"},get:function(){return this._nodeUnderMouse}},{key:"draggNode",set:function(t){this._draggNode=t},get:function(){return this._draggNode}},{key:"moveGroupToMouse",set:function(t){this._moveGroupToMouse=t},get:function(){return this._moveGroupToMouse}},{key:"clusterGrowth",get:function(){return this._clusterGrowth},set:function(t){this._clusterGrowth=t<=1?1.01:t,this.ui.clusterGrowth=this.clusterGrowth}},{key:"valid",set:function(t){var e=this;!t&&this.valid&&window.requestAnimationFrame(function(){return e.draw2()}),this._valid=t},get:function(){return this._valid}}]),t}();function O(t){return t/360+.5}function G(t){var e=Math.sin(t*Math.PI/180),s=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return s<0?0:s>1?1:s}var R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("Save/load groups")]),this.savedGroups.length?s("div",{staticClass:"group-list"},t._l(t.savedGroups,function(e,o){return s("div",{key:o,staticClass:"group-item row-between btn"},[s("div",{staticClass:"btn",class:{active:e.groupId===t.activeGroup},on:{click:function(e){t.selectGroup(o)}}},[t._v("\n                "+t._s(""+e.name)+"\n            ")]),s("div",{staticClass:"btn",class:{active:t.neighbourMode&&e.groupId===t.activeGroup},on:{click:function(e){t.handleNeighbourMode(o)}}},[t._v("\n                neighbours\n            ")]),s("div",{staticClass:"btn",on:{click:function(e){t.deleteGroup(o)}}},[s("trash")],1)])})):t._e(),s("div",{staticClass:"row v-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.groupName,expression:"groupName"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.groupName},on:{input:function(e){e.target.composing||(t.groupName=e.target.value)}}}),s("div",{staticClass:"btn",on:{click:t.saveGroup}},[t._v("save group")])])])},D=[],T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"trash-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polyline",{attrs:{points:"3 6 5 6 21 6"}}),s("path",{attrs:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}}),s("line",{attrs:{x1:"10",y1:"11",x2:"10",y2:"17"}}),s("line",{attrs:{x1:"14",y1:"11",x2:"14",y2:"17"}})])},E=[],j={name:"Trash"},z=j,H=(s("053d"),Object(u["a"])(z,T,E,!1,null,"79671cd2",null));H.options.__file="Trash.vue";var I=H.exports,A={name:"Groups",props:["activeGroup","setActiveGroup","getStore","toggleNeighbourMode","neighbourMode"],components:{Trash:I},data:function(){return{savedGroups:[],groupName:""}},methods:{saveGroup:function(){var t=this.savedGroups.length+1,e=this.groupName||"Group ".concat(t);this.savedGroups.push({groupId:t,name:e}),this.getStore().saveGroup(t)},selectGroup:function(t){var e=this.savedGroups[t].groupId;e===this.activeGroup?(console.log("unselect"),this.setActiveGroup(null),this.getStore().clearGroup()):(console.log("select"),this.getStore().loadGroupByGroupId(e),this.setActiveGroup(e))},deleteGroup:function(t){var e=this.savedGroups[t].groupId;this.savedGroups.splice(t,1),this.getStore().deleteGroup(e)},handleNeighbourMode:function(t){var e=this.savedGroups[t].groupId;e!==this.activeGroup&&this.selectGroup(t),this.toggleNeighbourMode(),this.setActiveGroup(e)}}},L=A,P=(s("3f6a"),Object(u["a"])(L,R,D,!1,null,"7b6a9096",null));P.options.__file="Groups.vue";var X=P.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("Neighbours")]),s("div",{staticClass:"btn between"},[t._v("\n        "+t._s(t.neighboursThreshold)+"\n        "),s("range-slider",{attrs:{value:t.neighboursThreshold,change:t.changeNeighboursThreshold}})],1),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.getGroupNeighbours}},[t._v("Update")]),s("div",{staticClass:"btn",on:{click:t.resetNeighbours}},[t._v("Reset")])])])},B=[],U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{attrs:{type:"range",min:"0",max:"1",step:"0.01"},domProps:{value:t.value},on:{input:t.change}})},F=[],$={name:"range-slider",props:["value","change","input","slide"]},q=$,K=(s("2de3"),Object(u["a"])(q,U,F,!1,null,"fa9b0e16",null));K.options.__file="RangeSlider.vue";var W=K.exports,Z={name:"Neighbours",props:["getStore","neighboursThreshold","changeNeighboursThreshold"],components:{RangeSlider:W},data:function(){return{loading:!1,neighbours:[]}},mounted:function(){this.$nextTick(this.getGroupNeighbours)},beforeDestroy:function(){this.resetNeighbours()},methods:{getGroupNeighbours:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,s,o,i,n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,e=this.getStore(),s={group:e.getGroupedNodeIds(),threshold:this.neighboursThreshold},o=e.groupNeighbours,i=e.removedGroupNeighbours,Object.keys(o).length&&(s.neighbours=o,Object.keys(i).length&&(s.removedNeighbours=i)),t.next=8,fetch("/api/v1/getGroupNeighbours",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}).then(function(t){return t.json()}).catch(function(t){console.error(t)});case 8:n=t.sent,a=n.neighbours,r=n.group,e.updateGroupNeighbours(a),e.addNodesToActiveGroup(r),console.log({neighbours:a,group:r}),this.loading=!1,t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),this.loading=!1,console.error(t.t0);case 20:case"end":return t.stop()}},t,this,[[0,16]])}));return function(){return t.apply(this,arguments)}}(),resetNeighbours:function(){this.getStore().resetGroupNeighbours()}}},J=Z,V=(s("6a9b"),Object(u["a"])(J,Y,B,!1,null,"76c78d0c",null));V.options.__file="Neighbours.vue";var Q=V.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"scissors-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"6",cy:"6",r:"3"}}),s("circle",{attrs:{cx:"6",cy:"18",r:"3"}}),s("line",{attrs:{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}}),s("line",{attrs:{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}}),s("line",{attrs:{x1:"8.12",y1:"8.12",x2:"12",y2:"12"}})])},et=[],st={name:"Scissors"},ot=st,it=(s("21f0"),Object(u["a"])(ot,tt,et,!1,null,"99c4648e",null));it.options.__file="Scissors.vue";var nt=it.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"x-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"18",y1:"6",x2:"6",y2:"18"}}),s("line",{attrs:{x1:"6",y1:"6",x2:"18",y2:"18"}})])},rt=[],ct={name:"X"},lt=ct,ut=(s("c837"),Object(u["a"])(lt,at,rt,!1,null,"c5401170",null));ut.options.__file="X.vue";var ht=ut.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"play-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polygon",{attrs:{points:"5 3 19 12 5 21 5 3"}})])},gt=[],vt={name:"Play"},pt=vt,ft=(s("162c"),Object(u["a"])(pt,dt,gt,!1,null,"418c94c6",null));ft.options.__file="Play.vue";var mt=ft.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"stop-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}})])},wt=[],Ct={name:"Stop"},_t=Ct,kt=(s("211d"),Object(u["a"])(_t,bt,wt,!1,null,"72d0796f",null));kt.options.__file="Stop.vue";var yt=kt.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"send-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"22",y1:"2",x2:"11",y2:"13"}}),s("polygon",{attrs:{points:"22 2 15 22 11 13 2 9 22 2"}})])},Nt=[],St={name:"Send"},Mt=St,Ot=(s("d024"),Object(u["a"])(Mt,xt,Nt,!1,null,"00d3ed7f",null));Ot.options.__file="Send.vue";var Gt=Ot.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"map-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("polygon",{attrs:{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}}),s("line",{attrs:{x1:"8",y1:"2",x2:"8",y2:"18"}}),s("line",{attrs:{x1:"16",y1:"6",x2:"16",y2:"22"}})])},Dt=[],Tt={name:"Map"},Et=Tt,jt=(s("2641"),Object(u["a"])(Et,Rt,Dt,!1,null,"23a8b1a4",null));jt.options.__file="Map.vue";var zt=jt.exports,Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"target-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),s("circle",{attrs:{cx:"12",cy:"12",r:"6"}}),s("circle",{attrs:{cx:"12",cy:"12",r:"2"}})])},It=[],At={name:"Target"},Lt=At,Pt=(s("add2"),Object(u["a"])(Lt,Ht,It,!1,null,"e205f062",null));Pt.options.__file="Target.vue";var Xt=Pt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.calcChartData}},[t._v("start")]),s("div",{staticClass:"btn",on:{click:t.resetChartData}},[t._v("reset")])]),s("trend",{attrs:{data:t.drawData,gradient:["#6fa8dc","#42b983","#2c3e50"],"auto-draw":""}}),t._v("\n    "+t._s(t.maxDrawTime())+"\n    "),s("trend",{attrs:{data:t.hitMapData,gradient:["#6fa8dc","#42b983","#2c3e50"],"auto-draw":""}}),t._v("\n    "+t._s(t.maxHitMapTime())+"\n")],1)},Bt=[],Ut=s("da19");o["a"].use(Ut["a"]);var Ft={name:"Logs",props:["getStore"],data:function(){return{drawData:[],hitMapData:[]}},computed:{},methods:{calcChartData:function(){var t=this.getStore();this.drawData=t.perfLogs.draw,this.hitMapData=t.perfLogs.hitmap},resetChartData:function(){console.log("reset");var t=this.getStore();t.perfLogs.draw=[],t.maxDrawTime=0,t.perfLogs.hitmap=[],t.maxHitMapTime=0,this.calcChartData()},maxDrawTime:function(){var t=this.getStore();return t?t.maxDrawTime:0},maxHitMapTime:function(){var t=this.getStore();return t?t.maxHitMapTime:0}}},$t=Ft,qt=(s("a9bd"),Object(u["a"])($t,Yt,Bt,!1,null,"f69218cc",null));qt.options.__file="Logs.vue";var Kt=qt.exports,Wt={store:null,name:"TsneMap",components:{Scissors:nt,X:ht,Play:mt,Stop:yt,Send:Gt,Navmap:zt,Target:Xt,Groups:X,Neighbours:Q,Logs:Kt,"slider-picker":C["Slider"]},data:function(){return{items:[],socket:null,connectedToSocket:!1,loadingNodes:!1,nodesTotal:0,nodesRecived:0,scale:0,labels:[],selectedLabel:null,selectedCategory:null,showLabels:!1,clickedNode:null,labelColor:"#6057ff",showKLabels:!1,scissors:!1,target:!1,width:0,height:0,activeNode:null,cluster:5,clusterRadius:0,clusterTile:0,imgSize:0,representImgSize:0,range:0,cuttedNodes:[],showOptions:!1,clusterGrowth:0,translateX:0,translateY:0,showHeatmap:!1,heatmapRadius:1,heatmapBlur:5,showNavHeatmap:!1,sizeRankedMode:!1,boarderRankedMode:!1,clusterMode:!1,oldClusterMode:!1,neighbourMode:!1,gradient:[[50,250,0],[100,250,0],[150,250,0],[200,250,0],[255,250,0],[255,150,0],[255,150,0],[255,100,0],[255,50,0],[255,0,0]],toggle:!1,zoomStage:0,showGroups:!0,sorted:!1,sizeRange:0,showColorPicker:!1,colors:{hex:"#194d33",hsl:{h:150,s:.5,l:.2,a:1},hsv:{h:150,s:.66,v:.3,a:1},rgba:{r:25,g:77,b:51,a:1},a:1},selectedGradient:0,autoUpdateEmbedding:!1,socketId:"",dataset:"001",neighboursThreshold:.2,activeGroup:0,representWithAlpha:!1}},methods:{getNode:function(t){return this.store.getNode(t)},getStore:function(){return this.store},sendData:function(){console.log("send data clicked"),console.log(this.store.nodes);var t=this.store.getNodes();console.log(t),this.loadingNodes=!0,this.socket.emit("updateNodes",{nodes:t})},changeActiveNode:function(t){return this.activeNode=t,null},clearGroup:function(){this.store.clearGroup(),this.activeGroup=null,this.neighbourMode=!1},setActiveGroup:function(t){this.activeGroup=t},changeNeighboursThreshold:function(t){var e=t.target;console.log("changeNeighboursThreshold"),console.log(e.v),this.neighboursThreshold=e.value,this.store.triggerDraw()},changeCluster:function(t){this.store.cluster+=t,this.cluster=this.store.cluster},changeClusterRadius:function(t){this.store.clusterRadius+=t,this.clusterRadius=this.store.clusterRadius},changeClusterTile:function(t){this.store.clusterTile+=t,this.clusterTile=this.store.clusterTile},sortNodes:function(){this.store.sortNodes(),this.sorted=this.store.sorted},drawHeatmap:function(){var t=this;console.time("drawHeatmap");var e=this.heatmap,s=Object.values(this.store.getNodes()).map(function(e){var s=(e.x*t.store.scale+t.store.translateX)/4,o=(e.y*t.store.scale+t.store.translateY)/4;return[s,o,1]});e.radius(this.heatmapRadius,this.heatmapBlur),e.data(s),e.draw(),requestAnimationFrame(function(){return console.timeEnd("drawHeatmap")})},drawNavHeatmap:function(){console.time("drawNavHeatmap");var t=this.navHeatmap,e=this.navHeatmapRect.width,s=this.navHeatmapRect.height,o=Object.values(this.store.getNodes()).map(function(t){var o=5*t.x+e/2,i=5*t.y+s/2;return[o,i,1]});t.radius(this.heatmapRadius,this.heatmapBlur),t.data(o),t.draw(),requestAnimationFrame(function(){return console.timeEnd("drawNavHeatmap")})},drawNavHeatmapRect:function(){console.time("drawNavHeatmapRect");var t=this.navHeatmapRect.getContext("2d"),e=20/this.store.scale,s=this.store.translateX/4,o=this.store.translateY/4,i=this.navHeatmapRect.width,n=this.navHeatmapRect.height,a=i/2-s*e,r=n/2-o*e;t.clearRect(0,0,this.navHeatmapRect.width,this.navHeatmapRect.height),t.strokeRect(a,r,i*e,n*e),requestAnimationFrame(function(){return console.timeEnd("drawNavHeatmapRect")})},toggleShowNavHeatmap:function(){this.showNavHeatmap=!this.showNavHeatmap,this.showNavHeatmap&&requestAnimationFrame(this.drawNavHeatmap),this.showNavHeatmap&&requestAnimationFrame(this.drawNavHeatmapRect)},toggleShowHeatmap:function(){this.showHeatmap=!this.showHeatmap,this.showHeatmap&&requestAnimationFrame(this.drawHeatmap)},toggleSizeRankedMode:function(){this.sizeRankedMode=!this.sizeRankedMode,this.store.triggerDraw()},toggleBoarderRankedMode:function(){this.boarderRankedMode=!this.boarderRankedMode,this.store.triggerDraw()},toggleClusterMode:function(){this.clusterMode=!this.clusterMode,this.store.createSuperCluster()},toggleOldClusterMode:function(){this.oldClusterMode=!this.oldClusterMode,this.store.triggerDraw()},toggleNeighbourMode:function(){this.neighbourMode=!this.neighbourMode,this.store.triggerDraw()},changeImgSize:function(t){this.store.imgSize+=t,this.imgSize=this.store.imgSize,this.store.triggerDraw()},toggleShowOptions:function(){this.showOptions=!this.showOptions},changeClusterGrowth:function(t){this.store.clusterGrowth=Math.round(100*(this.store.clusterGrowth+t))/100},changeZoomStage:function(t){this.store.zoomStage+=t,this.zoomStage=this.store.zoomStage,this.store.triggerDraw()},changeScaleUp:function(){this.store.changeScaleUp(),this.store.triggerDraw()},changeScaleDown:function(){this.store.changeScaleDown(),this.store.triggerDraw()},changeHeatmapRadius:function(t){this.heatmapRadius+=t,this.drawHeatmap(),this.drawNavHeatmap()},changeHeatmapBlur:function(t){this.heatmapBlur+=t,this.drawHeatmap(),this.drawNavHeatmap()},changeSizeRange:function(t){this.store.sizeRange+=t,this.sizeRange=this.store.sizeRange,this.store.triggerDraw()},selectTarget:function(){this.target=!this.target,this.store.moveGroupToMouse=this.target},selectScissors:function(){console.log("selectScissors"),this.scissors=!this.scissors,this.store.scissors=this.scissors},reset:function(){this.loadingNodes=!0,this.nodesRecived=0,this.nodesTotal=0},toggleRepresentWithAlpha:function(){this.representWithAlpha=!this.representWithAlpha,this.store.triggerDraw()},changeGradientColor:function(t){console.log("changeGradientColor"),this.selectedGradient=t,console.log(this.selectedGradient),this.colors.rgba.r=this.gradient[t][0],this.colors.rgba.g=this.gradient[t][1],this.colors.rgba.b=this.gradient[t][2],console.log(this.colors.rgba)},changeColor:function(t){console.log("changeColor"),console.log(t);var e=t.rgba;console.log(e),this.gradient.splice(this.selectedGradient,1,[e.r,e.g,e.b])},toggleUpdateEmbedding:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.autoUpdateEmbedding=!this.autoUpdateEmbedding,!this.autoUpdateEmbedding){t.next=15;break}return console.log("startUpdateEmbedding"),console.log(this.socketId),t.prev=4,e=JSON.stringify({nodes:this.store.getNodesSimple(),socketId:this.socketId}),t.next=8,fetch("/api/v1/startUpdateEmbedding",{method:"POST",headers:{"Content-type":"application/json"},body:e}).then(function(t){return t.text()});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](4),console.error(t.t0);case 13:t.next=16;break;case 15:console.log("stopUpdateEmbedding");case 16:case"end":return t.stop()}},t,this,[[4,10]])}));return function(){return t.apply(this,arguments)}}(),handleChangeDataset:function(t){this.dataset=t},superCluster:function(){this.store.createSuperCluster()},changeRepresentImgSize:function(t){this.store.representImgSize+=t,this.representImgSize=this.store.representImgSize,this.store.triggerDraw()}},watch:{cluster:function(t){this.store.cluster=t},colors:function(t){console.log("watch color"),console.log(t),console.log(this.colors)},$route:function(){this.store.triggerDraw()}},mounted:function(){var t=this,e="localhost",s=m.a.connect("http://".concat(e,":3000"),{transports:["websocket"],reconnectionDelay:100,reconnectionDelayMax:1e3}),o=document.getElementById("canvas"),i=o.parentNode.clientWidth,n=o.parentNode.clientHeight;o.width=i,o.height=n;var a=document.createElement("canvas");a.width=i,a.height=n;var r=document.getElementById("heatmap");r.width=i/4,r.height=n/4,this.heatmap=w()(r);var c=document.getElementById("navHeatmap");c.width=i/4,c.height=n/4,this.navHeatmap=w()(c);var l=document.getElementById("navHeatmapRect");l.width=i/4,l.height=n/4,l.getContext("2d").strokeStyle="#3882ff",l.getContext("2d").lineWidth=1.5,this.navHeatmapRect=l;var u=new M(o,a,s,this);this.store=u,u.labelColor=this.labelColor,this.cluster=u.cluster,this.clusterRadius=u.clusterRadius,this.clusterTile=u.clusterTile,this.representImgSize=u.representImgSize,this.zoomStage=u.zoomStage,this.sizeRange=u.sizeRange,console.log("Save store"),console.log(this.store),this.socket=s,s.on("connect",function(){t.connectedToSocket=!0,console.log("conected"),console.log("Socket id: ".concat(s.id)),console.log(s),t.socketId=s.id;var e=t.store.getNodes();console.log("nodes in store while connect (its maybe just a reconnect)"),console.log(e),Object.keys(e).length||t.loadingNodes||(s.emit("getNodes",{nodes:{}}),t.reset())}),s.on("disconnect",function(e){t.connectedToSocket=!1,console.log("disconnect: ".concat(e)),console.log(s)}),s.on("node",function(e){e.index%100===0&&(console.log("receive node ".concat(e.index)),console.log(e)),0===t.nodesRecived&&console.time("loadAllNodes"),t.nodesRecived+=1,u.addNode(new k(e)),u.triggerDraw()}),s.on("receiveImage",function(t){var e=u.nodes[t.index];e.image.src="data:image/jpeg;base64,".concat(t.buffer),e.hasImage=!0}),s.on("totalNodesCount",function(e){console.log("totalNodesCount"),console.log(e),t.nodesTotal=e}),s.on("allNodesSend",function(){console.log("allNodesSend"),t.loadingNodes=!1,console.timeEnd("loadAllNodes")}),s.on("updateLabels",function(e){console.log("updateLabels"),console.log(e),t.labels=e}),s.on("updateKdtree",function(t){console.log("updateKdtree"),console.log(t),u.kdtree=t}),s.on("updateEmbedding",function(e,s){console.log("updateEmbedding"),console.log(e),console.log(t.loadingNodes),t.loadingNodes=!1,console.log(t.loadingNodes),s({stopped:t.autoUpdateEmbedding}),t.store.updateNodes(e.nodes)}),s.on("connect_error",function(){console.log("connect_error")}),s.on("connect_timeout",function(){console.log("connect_timeout")}),s.on("reconnect",function(){console.log("reconnect")}),s.on("connecting",function(){console.log("connecting")}),s.on("reconnecting",function(){console.log("reconnecting")}),s.on("connect_failed",function(){console.log("connect_failed")}),s.on("reconnect_failed",function(){console.log("reconnect_failed")}),s.on("close",function(){console.log("close")})},beforeDestroy:function(){this.socket&&this.socket.disconnect()}},Zt=Wt,Jt=(s("a33d"),Object(u["a"])(Zt,g,v,!1,null,null,null));Jt.options.__file="TsneMap.vue";var Vt=Jt.exports,Qt={name:"App",components:{NavHeader:d,TsneMap:Vt}},te=Qt,ee=(s("034f"),Object(u["a"])(te,i,n,!1,null,null,null));ee.options.__file="App.vue";var se=ee.exports,oe=s("8c4f"),ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v("Welcome Route")])},ne=[],ae={name:"Welcome"},re=ae,ce=(s("fa3e"),Object(u["a"])(re,ie,ne,!1,null,"4fcc33a4",null));ce.options.__file="Welcome.vue";var le=ce.exports,ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"areas"},[t.loading?s("div",{staticClass:"loading"},[s("div",{staticClass:"loading-wheel"})]):t._e(),s("div",{staticClass:"imgArea",class:{activePositiv:t.selectPositives},on:{click:function(e){t.toggleActive(!0)}}},t._l(t.positives,function(e,o){return s("div",{key:o,staticClass:"image",on:{mouseover:function(s){t.handleMouseOver(e)}}},[s("img",{attrs:{src:e.icon,alt:""},on:{click:function(e){t.switchPositivs(o)},contextmenu:function(e){e.preventDefault(),t.removePositives(o)}}})])})),s("div",{staticClass:"imgArea",class:{activeNegativ:!t.selectPositives},on:{click:function(e){t.toggleActive(!1)}}},t._l(t.negatives,function(e,o){return s("div",{key:o,staticClass:"image",on:{mouseover:function(s){t.handleMouseOver(e)}}},[s("img",{attrs:{src:e.icon,alt:""},on:{click:function(e){t.switchNegatives(o)},contextmenu:function(e){e.preventDefault(),t.removeNegatives(o)}}})])})),s("div",{staticClass:"imgArea"},t._l(t.topScored,function(t,e){return s("div",{key:e,staticClass:"image"},[s("img",{attrs:{src:t.icon,alt:""}})])})),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.trainSvm}},[t._v("train")]),s("div",{staticClass:"btn",on:{click:t.stopSvm}},[t._v("stop")]),s("div",{staticClass:"btn",on:{click:t.clearSvm}},[t._v("clear")])]),s("div",{staticClass:"btn",on:{click:t.clearSvm}},[t._v(t._s(t.count))])])},he=[],de={name:"Svm",props:["node","nodes","getNode","changeActiveNode"],data:function(){return{positives:[],positivesAll:[],negatives:[],negativesAll:[],topScored:[],selectPositives:!0,loading:!1,count:0}},watch:{node:function(t){this.addNode(t)},nodes:function(t){var e=this;t&&t.forEach(function(t){return e.addNode(t)})}},methods:{addNode:function(t){t&&-1===this.positives.indexOf(t)&&-1===this.negatives.indexOf(t)&&(this.selectPositives?this.positives.push(t):this.negatives.push(t))},toggleActive:function(t){this.selectPositives=t},switchPositivs:function(t){this.negatives.push(this.positives[t]),this.positives.splice(t,1)},switchNegatives:function(t){this.positives.push(this.negatives[t]),this.negatives.splice(t,1)},removePositives:function(t){this.positives.splice(t,1)},removeNegatives:function(t){this.negatives.splice(t,1)},trainSvm:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,s,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("trainSvm clicked"),this.loading=!0,this.positives.forEach(function(t){return-1===o.positivesAll.indexOf(t)&&o.positivesAll.push(t)}),this.negatives.forEach(function(t){return-1===o.negativesAll.indexOf(t)&&o.negativesAll.push(t)}),e=JSON.stringify({p:this.positivesAll.map(function(t){return t.index}),n:this.negativesAll.map(function(t){return t.index}),count:this.count}),t.next=7,fetch("/api/v1/svm/train",{method:"POST",headers:{"Content-type":"application/json"},body:e}).then(function(t){return t.json()}).catch(function(t){o.loading=!1,console.error(t)});case 7:s=t.sent,console.log(s),this.count+=1,this.positives=[],s.p.forEach(function(t){var e=o.getNode(t);e?o.positives.push(e):console.log(new Error("der zurückgegebene Index in trainSvm ist nicht als Knoten vorhanden"))}),this.negatives=[],s.n.forEach(function(t){var e=o.getNode(t);e?o.negatives.push(e):console.log(new Error("der zurückgegebene Index in trainSvm ist nicht als Knoten vorhanden"))}),this.topScored=[],s.t.forEach(function(t){var e=o.getNode(t);e?o.topScored.push(e):console.log(new Error("der zurückgegebene Index in trainSvm ist nicht als Knoten vorhanden"))}),this.loading=!1,console.log("done");case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),stopSvm:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("stopSvm clicked"),this.loading=!0,t.next=4,fetch("/api/v1/svm/stop",{method:"POST",headers:{"Content-type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)});case 4:this.loading=!1;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),clearSvm:function(){this.count=0,this.positives=[],this.positivesAll=[],this.negatives=[],this.negativesAll=[]},handleMouseOver:function(t){this.changeActiveNode(t)}}},ge=de,ve=(s("14d2"),Object(u["a"])(ge,ue,he,!1,null,"469abb37",null));ve.options.__file="Svm.vue";var pe=ve.exports,fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[s("div",{staticClass:"title"},[t._v("categories")]),t._l(t.labels,function(e,o){return s("div",{key:o},[s("div",{staticClass:"option-title"},[t._v(t._s(e.name))]),t._l(e.labels,function(e,i){return s("div",{key:e.name,staticClass:"row"},[s("div",{staticClass:"btn",class:{active:t.selectedLabel===e.name},on:{click:function(s){t.toogleLabel(e.name,o)}}},[t._v("\n                "+t._s(e.name)+"\n            ")]),s("div",{staticClass:"btn",on:{click:function(s){s.stopPropagation(),t.addLabeledToGroup(e.name)}}},[s("grid")],1),s("div",{staticClass:"btn",class:{active:!e.show},on:{click:function(e){e.stopPropagation(),t.toogleShowLabel(i)}}},[s("slash")],1),s("div",{staticClass:"btn"},[s("input",{staticClass:"color-box",style:{backgroundColor:"rgb("+e.color[0]+","+e.color[1]+","+e.color[2]+")"},attrs:{type:"color"},domProps:{value:t.rgbToHex(e.color[0],e.color[1],e.color[2])},on:{change:function(e){e.preventDefault(),t.changeLabelColor(i,e)}}})])])})],2)}),s("div",{staticClass:"row wrap"},[t._l(t.labels,function(e,o){return s("div",{key:o,staticClass:"btn",class:{active:t.selectedCategory===o},on:{click:function(e){t.selectedCategory=o}}},[t._v("\n            "+t._s(e.name)+"\n        ")])}),s("div",{staticClass:"btn",on:{click:function(e){t.showAddCategory=!t.showAddCategory}}},[t._v("\n            +\n        ")])],2),t.showAddCategory?s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],attrs:{type:"text"},domProps:{value:t.category},on:{input:function(e){e.target.composing||(t.category=e.target.value)}}}),s("div",{staticClass:"btn",on:{click:t.addCategory}},[t._v("add")])]):t._e(),s("div",{staticClass:"imgArea"},t._l(t.selectedNodes,function(e,o){return s("div",{key:o,staticClass:"image"},[s("img",{attrs:{src:e.icon,alt:""},on:{click:function(e){t.removeNode(o)}}})])})),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],attrs:{type:"text"},domProps:{value:t.label},on:{focus:t.handleFocus,blur:t.handleBlur,input:function(e){e.target.composing||(t.label=e.target.value)}}}),t.showLabelOptions?s("div",{staticClass:"dropdown",on:{mouseenter:function(e){t.mouseOver=!0},mouseleave:function(e){t.mouseOver=!1}}},t._l(t.labelsFiltered,function(e){return s("div",{key:e.name,staticClass:"item",on:{click:function(s){t.chooseLabel(e.name)}}},[t._v(t._s(e.name))])})):t._e(),s("div",{staticClass:"btn",on:{click:t.addLabel}},[t._v("add"),s("hash")],1),s("div",{staticClass:"btn",on:{click:t.clear}},[t._v("clear"),s("x")],1)]),s("div",{staticClass:"btn",on:{click:t.update}},[t._v("update labels")])],2)},me=[],be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"hash-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("line",{attrs:{x1:"4",y1:"9",x2:"20",y2:"9"}}),s("line",{attrs:{x1:"4",y1:"15",x2:"20",y2:"15"}}),s("line",{attrs:{x1:"10",y1:"3",x2:"8",y2:"21"}}),s("line",{attrs:{x1:"16",y1:"3",x2:"14",y2:"21"}})])},we=[],Ce={name:"Hash"},_e=Ce,ke=(s("c93c"),Object(u["a"])(_e,be,we,!1,null,"9c27e646",null));ke.options.__file="Hash.vue";var ye=ke.exports,xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"slash-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),s("line",{attrs:{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"}})])},Ne=[],Se={name:"Slash"},Me=Se,Oe=(s("c684"),Object(u["a"])(Me,xe,Ne,!1,null,"35014a76",null));Oe.options.__file="Slash.vue";var Ge=Oe.exports,Re=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"grid-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("rect",{attrs:{x:"3",y:"3",width:"7",height:"7"}}),s("rect",{attrs:{x:"14",y:"3",width:"7",height:"7"}}),s("rect",{attrs:{x:"14",y:"14",width:"7",height:"7"}}),s("rect",{attrs:{x:"3",y:"14",width:"7",height:"7"}})])},De=[],Te={name:"Grid"},Ee=Te,je=(s("6fd4"),Object(u["a"])(Ee,Re,De,!1,null,"4f360516",null));je.options.__file="Grid.vue";var ze=je.exports;function He(t){return t=parseInt(t,10),isNaN(t)?"00":(t=Math.max(0,Math.min(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))}function Ie(t,e,s){return"#".concat(He(t)).concat(He(e)).concat(He(s))}function Ae(t){return"#"===t.charAt(0)?t.substring(1,7):t}function Le(t){return parseInt(Ae(t).substring(0,2),16)}function Pe(t){return parseInt(Ae(t).substring(2,4),16)}function Xe(t){return parseInt(Ae(t).substring(4,6),16)}var Ye={name:"classifier",props:["nodes","node","labels","getStore"],components:{Hash:ye,X:ht,Slash:Ge,Grid:ze},data:function(){return{label:"",showLabelOptions:!1,selectedNodes:[],mouseOver:!1,selectedCategory:"0",selectedLabel:"0",showAddCategory:!1,category:"",rgbToHex:Ie}},watch:{node:function(t){this.addNode(t)},nodes:function(t){var e=this;t&&t.forEach(function(t){return e.addNode(t)})}},methods:{addNode:function(t){t&&-1===this.selectedNodes.indexOf(t)&&this.selectedNodes.push(t)},removeNode:function(t){this.selectedNodes.splice(t,1)},addCategory:function(){console.log("addLabel clicked"),console.log(this.category);var t=Object.keys(this.labels).length;this.labels[t]={name:this.category,labels:[]},this.category="",this.showAddCategory=!1},addLabel:function(){var t=this;console.log("addLabel clicked"),console.log(this.label),this.labels[this.selectedCategory].labels.some(function(e){return e.name===t.label})||this.labels[this.selectedCategory].labels.push({name:this.label,show:!0}),this.selectedNodes.forEach(function(e){e.labels[t.selectedCategory]=t.label}),this.label="",this.showLabelOptions=!1,this.getStore().triggerDraw()},handleFocus:function(){console.log("input focus"),this.showLabelOptions=!0},handleBlur:function(){console.log("input blur"),this.mouseOver||(this.showLabelOptions=!1)},chooseLabel:function(t){console.log("chooselabel"),this.label=t,this.showLabelOptions=!1},update:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("update"),e=this.getStore().getNodes(),s=JSON.stringify({nodes:e}),t.next=5,fetch("/api/v1/updateLabels",{method:"POST",headers:{"Content-type":"application/json"},body:s}).then(function(t){return t.text()}).catch(function(t){console.error(t)});case 5:o=t.sent,console.log(o);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),clear:function(){this.selectedNodes=[]},changeLabelColor:function(t,e){console.log("changeLabelColor"),this.labels[this.selectedCategory].labels[t].color[0]=Le(e.target.value),this.labels[this.selectedCategory].labels[t].color[1]=Pe(e.target.value),this.labels[this.selectedCategory].labels[t].color[2]=Xe(e.target.value),this.store.triggerDraw()},toogleLabel:function(t,e){this.selectedLabel=this.selectedLabel===t?null:t,this.getStore().selectedLabel=this.selectedLabel,this.getStore().selectedCategory=e,this.getStore().triggerDraw()},addLabeledToGroup:function(t){this.store.addLabeledToGroup(t)},toogleShowLabel:function(t){this.labels[this.selectedCategory].labels[t].show=!this.labels[this.selectedCategory].labels[t].show,this.store.triggerDraw()}},computed:{labelsFiltered:function(){var t=this;return this.labels[this.selectedCategory].labels.filter(function(e){return e.name.includes(t.label)})}}},Be=Ye,Ue=(s("5707"),Object(u["a"])(Be,fe,me,!1,null,"b4741e20",null));Ue.options.__file="Classifier.vue";var Fe=Ue.exports,$e="classifier",qe="svm";o["a"].use(oe["a"]);var Ke=new oe["a"]({routes:[{path:"/",name:"Welcome",component:le},{path:"/".concat($e),name:$e,component:Fe,props:!0},{path:"/".concat(qe),name:qe,component:pe,props:!0}]});s("a766");o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(se)},router:Ke}).$mount("#app")},5707:function(t,e,s){"use strict";var o=s("f878"),i=s.n(o);i.a},"63f9":function(t,e,s){},"64a9":function(t,e,s){},"6a9b":function(t,e,s){"use strict";var o=s("9983"),i=s.n(o);i.a},"6fd4":function(t,e,s){"use strict";var o=s("0085"),i=s.n(o);i.a},"844e":function(t,e,s){},"870f":function(t,e,s){},9983:function(t,e,s){},"99b5":function(t,e,s){},a33d:function(t,e,s){"use strict";var o=s("369a"),i=s.n(o);i.a},a369:function(t,e,s){},a766:function(t,e,s){},a9bd:function(t,e,s){"use strict";var o=s("99b5"),i=s.n(o);i.a},add2:function(t,e,s){"use strict";var o=s("523c"),i=s.n(o);i.a},c232:function(t,e,s){},c684:function(t,e,s){"use strict";var o=s("a369"),i=s.n(o);i.a},c794:function(t,e,s){},c837:function(t,e,s){"use strict";var o=s("04f4"),i=s.n(o);i.a},c93c:function(t,e,s){"use strict";var o=s("dc9b"),i=s.n(o);i.a},cb99:function(t,e,s){},cd73:function(t,e,s){"use strict";var o=s("521b"),i=s.n(o);i.a},d024:function(t,e,s){"use strict";var o=s("cb99"),i=s.n(o);i.a},dc9b:function(t,e,s){},f878:function(t,e,s){},fa3e:function(t,e,s){"use strict";var o=s("844e"),i=s.n(o);i.a}});
//# sourceMappingURL=app.4539fe71.js.map