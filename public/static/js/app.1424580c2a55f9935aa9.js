webpackJsonp([1],{0:function(e,t){},"2pbd":function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"header"}},[t("router-link",{attrs:{to:{name:"Welcome"}}},[this._v("Home")]),this._v(" "),t("router-link",{attrs:{to:"/TsneMap"}},[this._v("TsneMap")]),this._v(" "),t("router-link",{attrs:{to:"/about"}},[this._v("About")])],1)},staticRenderFns:[]};var o={name:"App",components:{NavHeader:i("VU/8")({name:"NavHeader"},n,!1,function(e){i("OCSz")},"data-v-3aee8ca0",null).exports}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("NavHeader"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var c=i("VU/8")(o,a,!1,function(e){i("Tc3e")},null,null).exports,h=i("/ocq"),l={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("Hallo Welt")])},staticRenderFns:[]};var r=i("VU/8")({name:"Welcome"},l,!1,function(e){i("2pbd")},"data-v-5548b6b7",null).exports,d=i("mvHQ"),u=i.n(d),v=i("d7EF"),g=i.n(v),f=i("W3Iv"),m=i.n(f),p=i("fZjL"),_=i.n(p),N=i("gRE1"),w=i.n(N),k=i("Zrlr"),b=i.n(k),y=i("wxAW"),x=i.n(y),A=i("DmT9"),M=i.n(A),D=function(){function e(t,i){b()(this,e),this.name=t.name,this.links=t.links,this.index=t.index,this.x=t.x,this.y=t.y,this.width=40,this.height=40,this.initX=t.x,this.initY=t.y,this.triggerDraw=i,this.imageScale=5,this.icon=new Image,this.icon.src="data:image/jpeg;base64,"+t.buffer,this._isActive=!1,this.isActiveNeighbour=!1,this.hasImage=!1,this.image=new Image,this.scale=null,this.timerId=0,this._value=null}return x()(e,[{key:"move",value:function(e,t){this._x+=e,this._y+=t}},{key:"draw",value:function(e,t){this.scale=t;var i=(this.isActive||this.isActiveNeighbour)&&this.hasImage?this.image:this.icon;this.isActive?(e.globalAlpha=1,e.drawImage(i,this.x,this.y,this.width/t,this.height/t),e.globalAlpha=.3):this.isActiveNeighbour?(e.globalAlpha=1,e.drawImage(i,this.x,this.y,this.width/t,this.height/t),e.globalAlpha=.3):e.drawImage(i,this.x,this.y,this.width/t,this.height/t)}},{key:"contains",value:function(e,t,i){var s=this.width/i,n=this.height/i;return e>=this.x&&e<=this.x+s&&t>=this.y&&t<=this.y+n}},{key:"width",get:function(){return this.isActive?this._width+this._width*this.imageScale:this.isActiveNeighbour?this._width+this._width*this.imageScale*this.value:this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this.isActive?this._height+this._height*this.imageScale:this.isActiveNeighbour?this._height+this._height*this.imageScale*this.value:this._height},set:function(e){this._height=e}},{key:"value",get:function(){return this._value},set:function(e){this._value=e<.1?.1:e>1?1:e}},{key:"isActive",get:function(){return this._isActive},set:function(e){this._isActive=e}},{key:"x",get:function(){return this._x-this.width/2/this.scale},set:function(e){this._x=e}},{key:"y",get:function(){return this._y-this.height/2/this.scale},set:function(e){this._y=e}}]),e}(),Y=function(){function e(t,i){var s=this;b()(this,e),this.addNode=function(e){console.log("Node addded"),s.nodes[e.index]=e,s.valid=!1},this.draw=function(){if(!s.valid){console.log("reDraw started");var e=s.ctx;s.clear(),s.selection?e.globalAlpha=.3:e.globalAlpha=1,w()(s.nodes).map(function(t){return t.draw(e,s.scale,s.activeModus)}),s.valid=!0}},this.zoom=function(e){if(console.log("zoom event"),e.preventDefault(),e.stopPropagation(),s.selection){var t=s.findNodeByMousePosition(e.offsetX,e.offsetY);t&&t.isActiveNeighbour?(console.log("nodeUnderMouse"),console.log(t.name),e.deltaY<0&&(console.log("zoom in - image smaller"),t.value-=.1),e.deltaY>0&&(console.log("zoom out - image bigger"),t.value+=.1),s.valid=!1):console.log("no node under mouse oder the node is not a active neighbour")}else e.deltaY<0&&(console.log("zoom in"),s.scale+=1),e.deltaY>0&&(console.log("zoom out"),s.scale=s.scale-1),s.valid=!1;return!1},this.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation();var t=e.shiftKey,i=s.findNodeByMousePosition(e.offsetX,e.offsetY);console.log("mousedown"),s.startX=e.offsetX,s.startY=e.offsetY,i?(s.draggNode=i,s.activeModus&&t&&(i.isActiveNeighbour?(i.isActiveNeighbour=!1,delete s.selection.links[i.index],s.valid=!1):s.selection!==i&&(s.selection.links[i.index]=.5,i.isActiveNeighbour=!0,i.value=.5,s.valid=!1))):s.dragging=!0},this.handleMouseMove=function(e){var t=s.findNodeByMousePosition(e.offsetX,e.offsetY);if(t&&!t.hasImage&&s.socket.emit("requestImage",{name:t.name,index:t.index}),s.draggNode||s.dragging){var i=e.offsetX-s.startX,n=e.offsetY-s.startY;if(s.startX=e.offsetX,s.startY=e.offsetY,s.dragging)s.translateX+=i,s.translateY+=n;else if(s.draggNode){var o=i/s.scale,a=n/s.scale;s.draggNode.move(o,a),s.activeModus&&s.draggNode.isActive&&_()(s.draggNode.links).forEach(function(e){var t=s.nodes[e];t&&t.move(o*t.value,a*t.value)})}s.triggerDraw()}else s.activeModus||(!t&&s.selection?s.removeSelection():!s.selection&&t?s.selectNode(t):t&&t!==s.selection&&(s.removeSelection(),s.selectNode(t)))},this.handleMouseUp=function(){console.log("mouseup"),s.dragging=!1,s.draggNode=!1},this.handleDoubleClick=function(){console.log("Double click"),s.selection&&!s.activeModus?(s.activeModus=!0,s.activeNode=s.selection):s.activeModus&&(s.activeModus=!1,s.activeNode=!1)},this.socket=i,this.canvas=t,this.width=t.width,this.height=t.height,this.ctx=t.getContext("2d"),this.valid=!1,this.nodes={},this.dragging=!1,this.draggNode=!1,this.selection=null,this.activeModus=!1,this.activeNode=!1,this.scale=30,this.interval=100,this.offsetLeft=t.getBoundingClientRect().left,this.offsetTop=t.getBoundingClientRect().top,this.translateX=this.width/2,this.translateY=this.height/2,this.startX=null,this.startY=null,this.canvas.onmousedown=this.handleMouseDown,this.canvas.onmousemove=this.handleMouseMove,this.canvas.onmouseup=this.handleMouseUp,this.canvas.ondblclick=this.handleDoubleClick,this.canvas.onwheel=this.zoom,setInterval(function(){return s.draw()},this.interval)}return x()(e,[{key:"triggerDraw",value:function(){console.log("triggerDraw"),this.valid=!1}},{key:"getNodes",value:function(){return this.nodes}},{key:"getScale",value:function(){return this.scale}},{key:"resetStore",value:function(){this.nodes={},this.valid=!1}},{key:"clear",value:function(){this.ctx.resetTransform(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.translate(this.translateX,this.translateY),this.ctx.scale(this.scale,this.scale)}},{key:"findNodeByMousePosition",value:function(e,t){var i=this,s=(e-this.translateX)/this.scale,n=(t-this.translateY)/this.scale;return w()(this.nodes).slice(0).reverse().find(function(e){return e.contains(s,n,i.scale)})}},{key:"selectNode",value:function(e){var t=this;this.selection&&this.selection!==e&&this.removeSelection(),this.selection=e,console.log("selected Node"),console.log(this.selection),this.selection.isActive=!0,m()(e.links).forEach(function(e){var i=g()(e,2),s=i[0],n=i[1],o=t.nodes[s];o&&(o.isActiveNeighbour=!0,o.value=n)}),this.valid=!1}},{key:"removeSelection",value:function(){var e=this,t=this.selection;t&&(t.isActive=!1,_()(t.links).forEach(function(i){var s=e.nodes[i];s&&(s.isActiveNeighbour=!1,t.links[i]=s.value)})),this.selection=null,this.valid=!1}}]),e}(),C={name:"TsneMap",data:function(){return{exampleContent:"This is TEXT",items:[],store:null,socket:null}},methods:{updateCanvas:function(){},sendData:function(){console.log("send data clicked");var e=this.store.getNodes();this.store.resetStore(),this.socket.emit("updateNodes",u()(e))}},watch:{exampleContent:function(e,t){this.updateCanvas()}},computed:{scale:function(){return this.store&&this.store.scale},selectedNode:function(){return this.store&&this.store.selection&&this.store.selection.name},selectedNodeX:function(){return this.store&&this.store.selection&&this.store.selection.x},selectedNodeY:function(){return this.store&&this.store.selection&&this.store.selection.y},selectedNodeNeighboursCount:function(){return this.store&&this.store.selection&&this.store.selection.links&&_()(this.store.selection.links).length}},mounted:function(){var e=M()("http://localhost:3000"),t=document.getElementById("canvas"),i=new Y(t,e);this.store=i,this.socket=e,e.on("connect",function(t){t?(console.log("conected"),console.log(t)):(console.log("no conection"),console.log(t)),e.emit("updateNodes",{})}),e.on("node",function(e){console.log("receive node"),console.log(e),e&&i.addNode(new D(e,i.triggerDraw))}),e.on("receiveImage",function(e){console.log("receive image data"),console.log(e);var t=i.nodes[e.index];console.log(t),t.image.src="data:image/jpeg;base64,"+e.buffer,t.hasImage=!0,i.valid=!1})},beforeDestroy:function(){this.socket&&this.socket.disconnect()}},S={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"sub-header"},[i("div",{staticClass:"info-box"},[i("div",[e._v("Scale: "+e._s(e.scale))]),e._v(" "),i("div",[e._v("Selection: "+e._s(e.selectedNode))]),e._v(" "),i("div",[e._v("Neighbours #: "+e._s(e.selectedNodeNeighboursCount))]),e._v(" "),i("div",[e._v("x: "+e._s(e.selectedNodeX))]),e._v(" "),i("div",[e._v("y: "+e._s(e.selectedNodeY))])]),e._v(" "),i("div",{staticClass:"btn",on:{click:e.sendData}},[e._v("Update Data")])]),e._v(" "),i("canvas",{ref:"canvas",attrs:{id:"canvas",width:"1600",height:"800"}})])},staticRenderFns:[]};var X=i("VU/8")(C,S,!1,function(e){i("OD+p")},"data-v-66319966",null).exports,I={name:"Coins",data:function(){return{coin:{}}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;fetch("https://api.coinmarketcap.com/v1/ticker/"+this.$route.params.id+"/").then(function(t){e.coin=t.data[0],console.log(t)}).catch(function(e){console.log(e)})}}},T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",[e._v("Name: "+e._s(e.coin.name))]),e._v(" "),i("p",[e._v("Symbol: "+e._s(e.coin.symbol))]),e._v(" "),i("p",[e._v("Price (USD): "+e._s(e.coin.price_usd))])])},staticRenderFns:[]};var E=i("VU/8")(I,T,!1,function(e){i("PUMs")},"data-v-7c7c2eff",null).exports;s.a.use(h.a);var U=new h.a({routes:[{path:"/",name:"Welcome",component:r},{path:"/TsneMap",name:"TsneMap",component:X},{path:"/coins/:id",name:"Coins",component:E}]});i("cilB");s.a.config.productionTip=!1,new s.a({el:"#app",router:U,components:{App:c},template:"<App/>"})},OCSz:function(e,t){},"OD+p":function(e,t){},PUMs:function(e,t){},Tc3e:function(e,t){},cilB:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1424580c2a55f9935aa9.js.map