webpackJsonp([1],{0:function(e,t){},"2pbd":function(e,t){},KAl1:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"header"}},[t("router-link",{attrs:{to:{name:"Welcome"}}},[this._v("Home")]),this._v(" "),t("router-link",{attrs:{to:"/TsneMap"}},[this._v("TsneMap")]),this._v(" "),t("router-link",{attrs:{to:"/about"}},[this._v("About")])],1)},staticRenderFns:[]};var o={name:"App",components:{NavHeader:s("VU/8")({name:"NavHeader"},n,!1,function(e){s("OCSz")},"data-v-3aee8ca0",null).exports}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("NavHeader"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var c=s("VU/8")(o,a,!1,function(e){s("Tc3e")},null,null).exports,r=s("/ocq"),l={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("Hallo Welt")])},staticRenderFns:[]};var h=s("VU/8")({name:"Welcome"},l,!1,function(e){s("2pbd")},"data-v-5548b6b7",null).exports,u=s("mvHQ"),d=s.n(u),v=s("gRE1"),f=s.n(v),g=s("Zrlr"),m=s.n(g),p=s("wxAW"),b=s.n(p),w=s("DmT9"),N=s.n(w),_=function(){function e(t){m()(this,e),this.name=t.name,this.neighbours=t.neighbours,this.index=t.index,this.x=t.x,this.y=t.y,this.w=40,this.h=40,this.imageScale=5,this.icon=new Image,this.icon.src="data:image/jpeg;base64,"+t.buffer,this.isActive=!1,this.isActiveNeighbour=!1,this.hasImage=!1,this.image=new Image,this.v=null}return b()(e,[{key:"draw",value:function(e,t){console.log("start draw Image");var s=(this.isActive||this.isActiveNeighbour)&&this.hasImage?this.image:this.icon;this.isActive?(console.log("Active node while draw: "+this.name+"}"),console.log(this),e.globalAlpha=1,e.drawImage(s,this.x,this.y,this.width/t,this.height/t)):this.isActiveNeighbour?(console.log("Neighbour node while draw: "+this.name+"}"),console.log(this),e.globalAlpha=1,e.drawImage(s,this.x,this.y,this.width/t,this.height/t)):(e.globalAlpha=.5,e.drawImage(s,this.x,this.y,this.width/t,this.height/t))}},{key:"contains",value:function(e,t,s){var i=this.width/s,n=this.height/s;return e>=this.x&&e<=this.x+i&&t>=this.y&&t<=this.y+n}},{key:"addNeighbour",value:function(){}},{key:"removeNeighbour",value:function(){}},{key:"width",get:function(){return this.isActive?this.w+this.w*this.imageScale:this.isActiveNeighbour?this.w+this.w*this.imageScale*(this.value/10):this.w}},{key:"height",get:function(){return this.isActive?this.h+this.h*this.imageScale:this.isActiveNeighbour?this.h+this.h*this.imageScale*(this.value/10):this.h}},{key:"value",get:function(){return this.v},set:function(e){this.v=e<1?1:e>10?10:e}}]),e}(),x=function(){function e(t,s){var i=this;m()(this,e),this.addNode=function(e){console.log("Node addded"),i.nodes[e.index]=e,i.valid=!1},this.draw=function(){if(!i.valid){console.log("reDraw started");var e=i.ctx;i.clear(),i.freeze?i.canvas.style.background="#e2e2e2":i.canvas.style.background="#fff",f()(i.nodes).map(function(t){t.draw(e,i.scale)}),i.valid=!0}},this.zoom=function(e){if(e.preventDefault(),i.selection){var t=i.findNodeByMousePosition(e.offsetX,e.offsetY);t&&t.isActiveNeighbour?(console.log("nodeUnderMouse"),console.log(t.name),e.wheelDelta>0&&(console.log("zoom in - image smaller"),t.value-=1),e.wheelDelta<0&&(console.log("zoom out - image bigger"),t.value+=1),i.valid=!1):console.log("no node under mouse oder the node is not a active neighbour")}else e.wheelDelta>0&&(console.log("zoom in"),i.ctx.scale(2,2),i.scale+=1),e.wheelDelta<0&&(console.log("zoom out"),i.ctx.scale(.5,.5),i.scale=i.scale-1),i.valid=!1;return!1},this.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation();var t=e.shiftKey,s=i.findNodeByMousePosition(e.offsetX,e.offsetY);console.log("mousedown"),i.startX=e.offsetX,i.startY=e.offsetY,s?(i.freeze&&t&&(s.isActiveNeighbour?(s.isActiveNeighbour=!1,i.selection.neighbours=i.selection.neighbours.filter(function(e){return e.target!==s.index}),i.valid=!1):i.selection!==s&&(s.isActiveNeighbour=!0,i.selection.neighbours.push({target:s.index,value:5}),i.valid=!1)),i.freeze&&s.isActive&&(i.dragging=s)):i.dragging=!0},this.handleMouseMove=function(e){var t=i.findNodeByMousePosition(e.offsetX,e.offsetY);if(t&&!t.hasImage&&i.socket.emit("requestImage",{name:t.name,index:t.index}),i.freeze){if(i.dragging instanceof _){var s=e.offsetX-i.startX,n=e.offsetY-i.startY;i.startX=e.offsetX,i.startY=e.offsetY;var o=s/i.scale,a=n/i.scale;i.dragging.x+=o,i.dragging.y+=a,i.dragging.neighbours.forEach(function(e){i.nodes[e.target]&&(i.nodes[e.target].x+=o*i.nodes[e.target].value/10,i.nodes[e.target].y+=a*i.nodes[e.target].value/10)}),i.valid=!1}}else if(i.dragging){var c=e.offsetX-i.startX,r=e.offsetY-i.startY;i.startX=e.offsetX,i.startY=e.offsetY,i.translateX+=c,i.translateY+=r,i.valid=!1}else!t&&i.selection?i.removeSelection():!i.selection&&t?i.selectNode(t):t&&t!==i.selection&&(i.removeSelection(),i.selectNode(t))},this.handleMouseUp=function(e){console.log("mouseup"),i.dragging=!1},this.handleDoubleClick=function(e){console.log("Double click"),i.freeze?i.freeze=!i.freeze:i.selection&&(i.freeze=!0),i.valid=!1},this.socket=s,this.canvas=t,this.width=t.width,this.height=t.height,this.ctx=t.getContext("2d"),this.valid=!1,this.nodes={},this.dragging=!1,this.selection=null,this.freeze=!1,this.scale=30,this.interval=100,this.offsetLeft=t.getBoundingClientRect().left,this.offsetTop=t.getBoundingClientRect().top,this.translateX=this.width/2,this.translateY=this.height/2,this.startX=null,this.startY=null,this.canvas.onmousedown=this.handleMouseDown,this.canvas.onmousemove=this.handleMouseMove,this.canvas.onmouseup=this.handleMouseUp,this.canvas.ondblclick=this.handleDoubleClick,this.canvas.onmousewheel=this.zoom,setInterval(function(){return i.draw()},this.interval)}return b()(e,[{key:"getNodes",value:function(){return this.nodes}},{key:"resetStore",value:function(){this.nodes={},this.valid=!1}},{key:"clear",value:function(){this.ctx.resetTransform(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.translate(this.translateX,this.translateY),this.ctx.scale(this.scale,this.scale)}},{key:"findNodeByMousePosition",value:function(e,t){var s=this,i=(e-this.translateX)/this.scale,n=(t-this.translateY)/this.scale;return f()(this.nodes).slice(0).reverse().find(function(e){return e.contains(i,n,s.scale)})}},{key:"selectNode",value:function(e){var t=this;this.selection&&this.selection!==e&&this.removeSelection(),this.selection=e,console.log("selected Node"),console.log(this.selection),e.isActive=!0,e.neighbours.forEach(function(e){t.nodes[e.target]&&(t.nodes[e.target].isActiveNeighbour=!0,t.nodes[e.target].value=e.value)}),this.valid=!1}},{key:"removeSelection",value:function(){var e=this;this.selection.isActive=!1,this.selection.neighbours.forEach(function(t){e.nodes[t.target]&&(e.nodes[t.target].isActiveNeighbour=!1,t.value=e.nodes[t.target].value)}),this.selection=null,this.valid=!1}}]),e}(),y={name:"TsneMap",data:function(){return{exampleContent:"This is TEXT",items:[],store:null,socket:null}},methods:{updateCanvas:function(){},sendData:function(){console.log("send data clicked");var e=this.store.getNodes();this.store.resetStore(),this.socket.emit("updateNodes",d()(e))}},watch:{exampleContent:function(e,t){this.updateCanvas()}},computed:{scale:function(){return this.store&&this.store.scale},selectedNode:function(){return this.store&&this.store.selection&&this.store.selection.name},selectedNodeX:function(){return this.store&&this.store.selection&&this.store.selection.x},selectedNodeY:function(){return this.store&&this.store.selection&&this.store.selection.y},selectedNodeNeighboursCount:function(){return this.store&&this.store.selection&&this.store.selection.neighbours&&this.store.selection.neighbours.length}},mounted:function(){var e=N()("http://localhost:3000"),t=document.getElementById("canvas"),s=new x(t,e);this.store=s,this.socket=e,e.on("connect",function(e){e?(console.log("conected"),console.log(e)):console.log("no conection")}),e.on("node",function(e){console.log("receive node"),console.log(e),e&&s.addNode(new _(e))}),e.on("receiveImage",function(e){console.log("receive image data"),console.log(e);var t=s.nodes[e.index];console.log(t),t.image.src="data:image/jpeg;base64,"+e.buffer,t.hasImage=!0,s.valid=!1})},beforeDestroy:function(){this.socket.disconnect()}},k={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"sub-header"},[s("div",{staticClass:"info-box"},[s("div",[e._v("Scale: "+e._s(e.scale))]),e._v(" "),s("div",[e._v("Selection: "+e._s(e.selectedNode))]),e._v(" "),s("div",[e._v("Neighbours #: "+e._s(e.selectedNodeNeighboursCount))]),e._v(" "),s("div",[e._v("x: "+e._s(e.selectedNodeX))]),e._v(" "),s("div",[e._v("y: "+e._s(e.selectedNodeY))])]),e._v(" "),s("div",{staticClass:"btn",on:{click:e.sendData}},[e._v("Update Data")])]),e._v(" "),s("canvas",{ref:"canvas",attrs:{id:"canvas",width:"1600",height:"800"}})])},staticRenderFns:[]};var A=s("VU/8")(y,k,!1,function(e){s("KAl1")},"data-v-8bd58442",null).exports,D={name:"Coins",data:function(){return{coin:{}}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;fetch("https://api.coinmarketcap.com/v1/ticker/"+this.$route.params.id+"/").then(function(t){e.coin=t.data[0],console.log(t)}).catch(function(e){console.log(e)})}}},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v("Name: "+e._s(e.coin.name))]),e._v(" "),s("p",[e._v("Symbol: "+e._s(e.coin.symbol))]),e._v(" "),s("p",[e._v("Price (USD): "+e._s(e.coin.price_usd))])])},staticRenderFns:[]};var X=s("VU/8")(D,M,!1,function(e){s("PUMs")},"data-v-7c7c2eff",null).exports;i.a.use(r.a);var Y=new r.a({routes:[{path:"/",name:"Welcome",component:h},{path:"/TsneMap",name:"TsneMap",component:A},{path:"/coins/:id",name:"Coins",component:X}]});s("cilB");i.a.config.productionTip=!1,new i.a({el:"#app",router:Y,components:{App:c},template:"<App/>"})},OCSz:function(e,t){},PUMs:function(e,t){},Tc3e:function(e,t){},cilB:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c634e94cc444356a93fa.js.map